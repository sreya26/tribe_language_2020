{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}plog_909
       {txt}log:  {res}/Users/sreyamajumder/Dropbox/sreya_majumder/tribelanguage_2020 sreya/02_scripts/2.11_make_excel_state_tables.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}16 Nov 2021, 12:41:46
{txt}
{com}. project , uses("../03_processed/dise_basic_general_with_regions.dta")
{txt}project version2_tribe_language > do-file uses: {res}"03_processed/dise_basic_general_with_regions.dta" filesig(4208678473:526147983){txt}

{com}. project , uses("../03_processed/lang_workfile.dta")
{txt}project version2_tribe_language > do-file uses: {res}"03_processed/lang_workfile.dta" filesig(4101914903:5173431){txt}

{com}. project , uses("../03_processed/census_1961_mothertongue_for_analysis_distance.dta")
{txt}project version2_tribe_language > do-file uses: {res}"03_processed/census_1961_mothertongue_for_analysis_distance.dta" filesig(2272825759:18580009){txt}

{com}. project , uses("../08_temp/census2011_religion_edu_data.dta")
{txt}project version2_tribe_language > do-file uses: {res}"08_temp/census2011_religion_edu_data.dta" filesig(40294045:122751){txt}

{com}. project , uses("../08_temp/census2011_agg_state_edu_data.dta")
{txt}project version2_tribe_language > do-file uses: {res}"08_temp/census2011_agg_state_edu_data.dta" filesig(1828574044:75869){txt}

{com}. 
. 
. 
. 
. *************************************************************************************************************************************  
. *Getting the top two mediums of instructions in states using DISE data 
. *************************************************************************************************************************************
.                 
.         
.         use "../03_processed/dise_basic_general_with_regions.dta" , clear
{txt}
{com}.         gen state_2011 = state_1961
{txt}
{com}.         replace state_2011 = "Jharkhand" if state_1961 == "Bihar" & inlist(regionname6113,"Santal Parganas","Palamau","Dhanbad, Hazaribagh","Ranchi","Singhbhum")
{txt}(45,243 real changes made)

{com}.         replace state_2011 = "Chhattisgarh" if state_1961 == "Madhya Pradesh" & inlist(regionname6113,"Surguja","Bilaspur, Durg","Raigarh","Raipur","Bastar")
{txt}(39,092 real changes made)

{com}.         replace state_2011 = "Meghalaya" if state_1961 == "Assam"  & inlist(regionname6113,"Garo Hills","United Khasi And Jaintia Hills")
{txt}(9,505 real changes made)

{com}.         replace state_2011 = "Mizoram" if state_1961 == "Assam" & inlist(regionname6113,"Mizo Hills")
{txt}(1,895 real changes made)

{com}.         replace state_2011 = "Tamil Nadu" if state_1961 == "Madras"
{txt}(48,834 real changes made)

{com}.         replace state_2011 = "Karnataka" if state_1961 == "Mysore"
{txt}(60,205 real changes made)

{com}.         replace state_2011 = "Odisha" if state_1961 == "Orissa"
{txt}(56,177 real changes made)

{com}.         replace state_2011 = "Dadra & Nagar Haveli" if state_1961 == "Dadra and Nagar Haveli"
{txt}(317 real changes made)

{com}.         replace state_2011 = "Lakshadweep" if state_1961 == "Laccadive, Minicoy and Amindivi Islands"
{txt}(35 real changes made)

{com}. 
.                 
.         gen num_schools = 1
{txt}
{com}.         collapse (count) num_schools, by(state_2011 medinstr1) //gives us the count for number of schools for each medium of instruction in each state
{res}{txt}
{com}.         egen total_num_schools = total(num_schools), by(state_2011) //total number of schools in that state
{txt}
{com}.         gen medium_perc = num_schools/total_num_schools * 100 //percentage of schools in that state with a particular medium of instruction
{txt}
{com}.         egen medium_rank = rank(-num_schools), by(state_2011)
{txt}
{com}.         keep if inrange(medium_rank,1,2)
{txt}(189 observations deleted)

{com}. 
. 
.         keep state_2011 medinstr1 medium_perc medium_rank
{txt}
{com}.         reshape wide medinstr1 medium_perc, i(state_2011) j(medium_rank)
{txt}(j = 1 2)

Data{col 36}Long{col 43}->{col 48}Wide
{hline 77}
Number of observations     {res}          55   {txt}->   {res}28          
{txt}Number of variables        {res}           4   {txt}->   {res}5           
{txt}j variable (2 values)       {res}medium_rank   {txt}->   (dropped)
xij variables:
                              {res}medinstr1   {txt}->   {res}medinstr11 medinstr12
                            medium_perc   {txt}->   {res}medium_perc1 medium_perc2
{txt}{hline 77}

{com}. 
.         tempfile dise_data
{txt}
{com}.         save `dise_data'
{txt}{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_00324.000008{rm}
saved
as .dta format
{p_end}

{com}.          
.          
. *************************************************************************************************************************************  
. * Using the Lang workfile to get top 10 tribes in the country
. * perc of the top 10 tribes in the states, retaining only the top 5 states where they occur
. * finally merging with dise data which has info on medium of instruction 
. *************************************************************************************************************************************
. 
.          
.          use "../03_processed/lang_workfile.dta", clear
{txt}
{com}.          drop if is_state | castegroup_1961_2011_code == 500 
{txt}(660 observations deleted)

{com}.          egen total_st_popn_2011 = total(total_p_2011) //national st popn
{txt}
{com}.          egen total_tribe_popn_2011 = total(total_p_2011), by(castegroup_1961_2011_code) //national popn of each tribe 
{txt}
{com}.          
.          
.         gen state_2011 = state_1961
{txt}
{com}.         replace state_2011 = "Jharkhand" if state_1961 == "Bihar" & inlist(regionname6113,"Santal Parganas","Palamau","Dhanbad, Hazaribagh","Ranchi","Singhbhum")
{txt}(123 real changes made)

{com}.         replace state_2011 = "Chhattisgarh" if state_1961 == "Madhya Pradesh" & inlist(regionname6113,"Surguja","Bilaspur, Durg","Raigarh","Raipur","Bastar")
{txt}(121 real changes made)

{com}.         replace state_2011 = "Meghalaya" if state_1961 == "Assam"  & inlist(regionname6113,"Garo Hills","United Khasi And Jaintia Hills")
{txt}(20 real changes made)

{com}.         replace state_2011 = "Mizoram" if state_1961 == "Assam" & inlist(regionname6113,"Mizo Hills")
{txt}(11 real changes made)

{com}.         replace state_2011 = "Tamil Nadu" if state_1961 == "Madras"
{txt}(90 real changes made)

{com}.         replace state_2011 = "Karnataka" if state_1961 == "Mysore"
{txt}(115 real changes made)

{com}.         replace state_2011 = "Odisha" if state_1961 == "Orissa"
{txt}(367 real changes made)

{com}.         replace state_2011 = "Dadra & Nagar Haveli" if state_1961 == "Dadra and Nagar Haveli"
{txt}(7 real changes made)

{com}.         replace state_2011 = "Lakshadweep" if state_1961 == "Laccadive, Minicoy and Amindivi Islands"
{txt}(1 real change made)

{com}. 
.         
.         egen state_tribe_popn_2011 = total(total_p_2011), by(castegroup_1961_2011_code state_2011) //total popn of each tribe in each state 
{txt}
{com}. 
.         drop if castegroup_1961_2011_code == 990 
{txt}(165 observations deleted)

{com}. 
.         preserve
{txt}
{com}.                         collapse (sum) total_p_2011, by(castegroup_1961_2011_code)
{res}{txt}
{com}.                         gsort -total_p_2011
{txt}
{com}. 
.                         gen big10 = 1 in 1/10 
{txt}(232 missing values generated)

{com}.                         replace big10 = 0 if missing(big10)
{txt}(232 real changes made)

{com}. 
.                         keep castegroup_1961_2011_code big10
{txt}
{com}.                         tempfile big10
{txt}
{com}.                         save `big10'
{txt}{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_00324.00000a{rm}
saved
as .dta format
{p_end}

{com}.         restore
{txt}
{com}.                 
.         merge m:1 castegroup_1961_2011_code using `big10', nogen
{res}{txt}(label {bf:{txt}CASTE_GROUPS_1961_2011} already defined)

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}           2,090{txt}  
{col 5}{hline 41}

{com}.         keep if big10 == 1
{txt}(1,650 observations deleted)

{com}.         order state_2011, after(state_1961)
{txt}
{com}.         gen state_tribe_perc = state_tribe_popn_2011/total_tribe_popn_2011 * 100 //variable capturing perc of tribe popn that occurs in each state 
{txt}
{com}.         gen national_tribe_perc = total_tribe_popn_2011/total_st_popn_2011 * 100
{txt}
{com}. 
.         preserve 
{txt}
{com}.                 keep castegroup_1961_2011_code state_2011 state_tribe_perc
{txt}
{com}.                 duplicates drop 

{p 0 4}{txt}Duplicates in terms of {txt} all variables{p_end}

(383 observations deleted)

{com}.                 egen top_states_2011 = rank(-state_tribe_perc), by(castegroup_1961_2011_code) //identifying the top states where the top 10 tribes occur
{txt}
{com}.                 keep castegroup_1961_2011_code state_2011 top_states_2011
{txt}
{com}.                 tempfile topstates
{txt}
{com}.                 save `topstates'
{txt}{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_00324.00000c{rm}
saved
as .dta format
{p_end}

{com}.         restore
{txt}
{com}. 
. 
.         merge m:1 castegroup_1961_2011_code state_2011 using `topstates', nogen
{res}{txt}(label {bf:{txt}CASTE_GROUPS_1961_2011} already defined)

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             440{txt}  
{col 5}{hline 41}

{com}.         keep if inrange(top_states_2011,1,5)
{txt}(83 observations deleted)

{com}.         
. 
.         egen total_p_2011_state = total(total_p_2011), by(castegroup_1961_2011_code state_2011) //total popn of each tribe in each state
{txt}
{com}.         egen matricplus_p_2011_state = total(matricplus_p_2011), by(castegroup_1961_2011_code state_2011) //total matricplus popn of each tribe in each state
{txt}
{com}.         egen age0to14_p_2011_state = total(age0to14_p_2011), by(castegroup_1961_2011_code state_2011) //total popn of tribe aged 0-14 in each state
{txt}
{com}.         egen literate_p_2011_state = total(literate_p_2011), by(castegroup_1961_2011_code state_2011) //total popn of tribe that is literate in each state
{txt}
{com}.         egen age0to6_p_2011_state = total(age0to6_p_2011), by(castegroup_1961_2011_code state_2011) //total popn of tribe aged 0-6 in that state
{txt}
{com}.         
. 
. 
.         keep state_2011 castegroup_1961_2011_code total_st_popn_2011 total_tribe_popn_2011 national_tribe_perc state_tribe_popn_2011 state_tribe_perc top_states_2011 total_p_2011_state matricplus_p_2011_state age0to14_p_2011_state literate_p_2011_state age0to6_p_2011_state
{txt}
{com}. 
.         assert total_p_2011_state == state_tribe_popn_2011 // a small check
{txt}
{com}.         duplicates drop 

{p 0 4}{txt}Duplicates in terms of {txt} all variables{p_end}

(315 observations deleted)

{com}.                 
.         ** constructing state level literacy and matricplus rates
.         
.         gen matricplus_rate_2011 =  matricplus_p_2011_state / (total_p_2011_state - age0to14_p_2011_state) * 100
{txt}
{com}.         gen literacy_rate_2011 = literate_p_2011_state /(total_p_2011_state - age0to6_p_2011_state) * 100
{txt}
{com}.         merge m:1 state_2011 using `dise_data' , keep(match) nogen 
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              42{txt}  
{col 5}{hline 41}

{com}. 
. 
.         tempfile state_dise
{txt}
{com}.         save `state_dise'
{txt}{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_00324.00000d{rm}
saved
as .dta format
{p_end}

{com}.         
. ********************************************************************************************************************************************************************************* 
. * Using mothertongue data to identify the mothertongues which are
. * (1) used as a medium of instruction in school 
. * (2) the language most commonly spoken by that tribe in that state
. *********************************************************************************************************************************************************************************
. 
. 
.         use "../03_processed/census_1961_mothertongue_for_analysis_distance.dta", clear
{txt}
{com}. 
.         drop if mothertongue == "all mother tongues" | castegroup_1961_2011_code == 500 
{txt}(6,207 observations deleted)

{com}.         drop if is_state == 1 
{txt}(3,133 observations deleted)

{com}. 
. 
.         gen state_2011 = state_1961
{txt}
{com}.         replace state_2011 = "Jharkhand" if state_1961 == "Bihar" & inlist(regionname6113,"Santal Parganas","Palamau","Dhanbad, Hazaribagh","Ranchi","Singhbhum")
{txt}(619 real changes made)

{com}.         replace state_2011 = "Chhattisgarh" if state_1961 == "Madhya Pradesh" & inlist(regionname6113,"Surguja","Bilaspur, Durg","Raigarh","Raipur","Bastar")
{txt}(526 real changes made)

{com}.         replace state_2011 = "Meghalaya" if state_1961 == "Assam"  & inlist(regionname6113,"Garo Hills","United Khasi And Jaintia Hills")
{txt}(67 real changes made)

{com}.         replace state_2011 = "Mizoram" if state_1961 == "Assam" & inlist(regionname6113,"Mizo Hills")
{txt}(37 real changes made)

{com}.         replace state_2011 = "Tamil Nadu" if state_1961 == "Madras"
{txt}(219 real changes made)

{com}.         replace state_2011 = "Karnataka" if state_1961 == "Mysore"
{txt}(361 real changes made)

{com}.         replace state_2011 = "Odisha" if state_1961 == "Orissa"
{txt}(794 real changes made)

{com}.         replace state_2011 = "Dadra & Nagar Haveli" if state_1961 == "Dadra and Nagar Haveli"
{txt}(28 real changes made)

{com}.         replace state_2011 = "Lakshadweep" if state_1961 == "Laccadive, Minicoy and Amindivi Islands"
{txt}(5 real changes made)

{com}. 
. 
.         egen total_speakers_p = rowtotal(total_speakers_m total_speakers_f)
{txt}
{com}. 
. 
.         collapse (sum) total_speakers_p, by(state_2011 castegroup_1961_2011_code mothertongue)
{res}{txt}
{com}.         egen state_popn = total(total_speakers_p), by(castegroup_1961_2011_code state_2011)
{txt}
{com}. 
.         merge m:1 state_2011 castegroup_1961_2011_code using `state_dise' , keep(match) nogen
{res}{txt}(label {bf:{txt}CASTE_GROUPS_1961_2011} already defined)
(label {bf:{txt}MEDINSTR1} already defined)

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             668{txt}  
{col 5}{hline 41}

{com}. 
. 
.         order state_2011 castegroup_1961_2011_code mothertongue medinstr11 medinstr12
{txt}
{com}.         egen tag = tag(state_2011 medinstr11)
{txt}
{com}.         list state_2011 medinstr11 if tag == 1 , noobs table //to identify the medium of instructions for each state
{txt}
  {c TLC}{hline 22}{c -}{hline 10}{c TRC}
  {c |} {res}          state_2011   medin~11 {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}               Assam   Assamese {txt}{c |}
  {c |} {res}               Bihar      Hindi {txt}{c |}
  {c |} {res}        Chhattisgarh      Hindi {txt}{c |}
  {c |} {res}Dadra & Nagar Haveli   Gujarati {txt}{c |}
  {c |} {res}             Gujarat   Gujarati {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}           Jharkhand      Hindi {txt}{c |}
  {c |} {res}           Karnataka    Kannada {txt}{c |}
  {c |} {res}      Madhya Pradesh      Hindi {txt}{c |}
  {c |} {res}         Maharashtra    Marathi {txt}{c |}
  {c |} {res}             Manipur    English {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}           Meghalaya      Khasi {txt}{c |}
  {c |} {res}             Mizoram       Mizo {txt}{c |}
  {c |} {res}            Nagaland    English {txt}{c |}
  {c |} {res}              Odisha      Oriya {txt}{c |}
  {c |} {res}           Rajasthan      Hindi {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}             Tripura    Bengali {txt}{c |}
  {c |} {res}         West Bengal    Bengali {txt}{c |}
  {c BLC}{hline 22}{c -}{hline 10}{c BRC}

{com}.         drop tag 
{txt}
{com}. 
.         /*
>   +-----------------------------------+
>   |             state_2011   medin~11 |
>   |-----------------------------------|
>   |                  Assam   Assamese |
>   |                  Bihar      Hindi |
>   |           Chhattisgarh      Hindi |
>   |   Dadra & Nagar Haveli   Gujarati |
>   |                Gujarat   Gujarati |
>   |-----------------------------------|
>   |              Jharkhand      Hindi |
>   |         Madhya Pradesh      Hindi |
>   |            Maharashtra    Marathi |
>   |                Manipur    English |
>   |              Meghalaya      Khasi |
>   |-----------------------------------|
>   |                Mizoram       Mizo |
>   |              Karnataka    Kannada |
>   |               Nagaland    English |
>   |                 Odisha      Oriya |
>   |              Rajasthan      Hindi |
>   |-----------------------------------|
>   |                Tripura    Bengali |
>   |            West Bengal    Bengali |
>   +-----------------------------------+
> 
>         */
.         
.         
.         gen state_lang = 0
{txt}
{com}.         replace state_lang = 1 if mothertongue == "bengali" & inlist(state_2011, "West Bengal", "Tripura")
{txt}(4 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "hindi" & inlist(state_2011,"Bihar", "Rajasthan", "Madhya Pradesh", "Jharkhand", "Chhattisgarh")
{txt}(12 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "gujarati" & inlist(state_2011, "Gujarat", "Dadra & Nagar Haveli")
{txt}(4 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "marathi" & state_2011 == "Maharashtra"
{txt}(3 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "oriya" & state_2011 == "Odisha"
{txt}(6 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "english" & state_2011 == "Nagaland"
{txt}(0 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "kannada" & state_2011 == "Karnataka"
{txt}(2 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "assamese" & state_2011 == "Assam"
{txt}(1 real change made)

{com}.         replace state_lang = 1 if mothertongue == "mizo" & state_2011 == "Mizoram"
{txt}(0 real changes made)

{com}.         replace state_lang = 1 if mothertongue == "khasi" & state_2011 == "Meghalaya"
{txt}(1 real change made)

{com}.         replace state_lang = 1 if mothertongue == "english" & state_2011 == "Manipur"
{txt}(0 real changes made)

{com}. 
.         egen tag = tag(state_2011 medinstr12)
{txt}
{com}.         list state_2011 medinstr12 if tag == 1 , noobs table //to identify the medium of instructions for each state
{txt}
  {c TLC}{hline 22}{c -}{hline 10}{c TRC}
  {c |} {res}          state_2011   medin~12 {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}               Assam    Bengali {txt}{c |}
  {c |} {res}               Bihar       Urdu {txt}{c |}
  {c |} {res}        Chhattisgarh    English {txt}{c |}
  {c |} {res}Dadra & Nagar Haveli    Marathi {txt}{c |}
  {c |} {res}             Gujarat    English {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}           Jharkhand    English {txt}{c |}
  {c |} {res}           Karnataka       Urdu {txt}{c |}
  {c |} {res}      Madhya Pradesh    English {txt}{c |}
  {c |} {res}         Maharashtra    English {txt}{c |}
  {c |} {res}             Manipur     Others {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}           Meghalaya       Garo {txt}{c |}
  {c |} {res}             Mizoram    English {txt}{c |}
  {c |} {res}              Odisha    English {txt}{c |}
  {c |} {res}           Rajasthan    English {txt}{c |}
  {c |} {res}             Tripura    English {txt}{c |}
  {c LT}{hline 22}{c -}{hline 10}{c RT}
  {c |} {res}         West Bengal    English {txt}{c |}
  {c BLC}{hline 22}{c -}{hline 10}{c BRC}

{com}.         drop tag 
{txt}
{com}.         
.         /*
>   +-----------------------------------+
>   |             state_2011   medin~12 |
>   |-----------------------------------|
>   |                  Assam    Bengali |
>   |                  Bihar       Urdu |
>   |           Chhattisgarh    English |
>   |   Dadra & Nagar Haveli    Marathi |
>   |                Gujarat    English |
>   |-----------------------------------|
>   |              Jharkhand    English |
>   |         Madhya Pradesh    English |
>   |            Maharashtra    English |
>   |                Manipur     Others |
>   |              Meghalaya       Garo |
>   |-----------------------------------|
>   |                Mizoram    English |
>   |              Karnataka       Urdu |
>   |                 Odisha    English |
>   |              Rajasthan    English |
>   |                Tripura    English |
>   |-----------------------------------|
>   |            West Bengal    English |
>   +-----------------------------------+
>         */
.         
.         
.         gen state_lang_2 = 0
{txt}
{com}.         replace state_lang_2 = 1 if mothertongue == "english" & inlist(state_2011, "West Bengal","Tripura","Rajasthan","Odisha")
{txt}(2 real changes made)

{com}.         replace state_lang_2 = 1 if mothertongue == "english" & inlist(state_2011,"Maharashtra","Madhya Pradesh","Jharkhand","Gujarat","Chhattisgarh","Mizoram")
{txt}(0 real changes made)

{com}.         replace state_lang_2 = 1 if mothertongue == "bengali" & state_2011 == "Assam"
{txt}(0 real changes made)

{com}.         replace state_lang_2 = 1 if mothertongue == "urdu" & state_2011 == "Bihar"
{txt}(0 real changes made)

{com}.         replace state_lang_2 = 1 if mothertongue == "marathi" & state_2011 == "Dadra & Nagar Haveli"
{txt}(1 real change made)

{com}.         replace state_lang_2 = 1 if mothertongue == "urdu" & state_2011 == "Karnataka"
{txt}(1 real change made)

{com}.         replace state_lang_2 = 1 if mothertongue == "garo" & state_2011 == "Meghalaya"
{txt}(1 real change made)

{com}. 
.         
.         
.         gen lang_perc = total_speakers_p/state_popn * 100
{txt}
{com}.         egen lang_rank = rank(-lang_perc), by(castegroup_1961_2011_code state_2011) //we rank the mothertongues according to total speakers
{txt}
{com}.         keep if state_lang == 1 | state_lang_2 == 1 | inrange(lang_rank,1,3) //we only retain those mothertongues which are either spoken as the medium of instructions or ranked 1-3 depending on total speakers
{txt}(539 observations deleted)

{com}.                 
.         ********************************************************************************************************************************************************************************
. * Lang Order Logic
. * first we display the major medium of instruction
. * next we display the second major medium of instruction 
. * next we display the most popular language spoken in the region 
. * in the event that mediums of instruction are not spoken, we include other popular mothertongues, ranks are scaled by 10 so as to not interfere with preassigned order
. ********************************************************************************************************************************************************************************
.         
.     gen lang_order = 1 if state_lang == 1 
{txt}(96 missing values generated)

{com}.         replace lang_order = 2 if state_lang_2 == 1 
{txt}(5 real changes made)

{com}.         replace lang_order = 3 if lang_rank == 1 & !inlist(lang_order,1,2) 
{txt}(24 real changes made)

{com}.         replace lang_order = lang_rank + 10 if !inlist(lang_order,1,2,3) 
{txt}(67 real changes made)

{com}. 
. 
.         sort castegroup_1961_2011_code state_2011
{txt}
{com}.         keep lang_order state_2011 castegroup_1961_2011_code national_tribe_perc state_tribe_perc ///
>         matricplus_rate_2011 literacy_rate_2011 medinstr11 medium_perc1 medinstr12 medium_perc2 mothertongue lang_perc 
{txt}
{com}.         
.         order state_2011 castegroup_1961_2011_code national_tribe_perc state_tribe_perc ///
>         matricplus_rate_2011 literacy_rate_2011 medinstr11 medium_perc1 medinstr12 medium_perc2  mothertongue lang_perc
{txt}
{com}.         
.         format national_tribe_perc state_tribe_perc matricplus_rate_2011 literacy_rate_2011 medium_perc1 medium_perc2 lang_perc %5.2f
{txt}
{com}.         bysort castegroup_1961_2011_code state_2011 (lang_order): gen i = _n
{txt}
{com}. 
.         drop lang_order
{txt}
{com}.         reshape wide lang_perc mothertongue, i(state_2011 castegroup_1961_2011_code) j(i) 
{txt}(j = 1 2 3 4)

Data{col 36}Long{col 43}->{col 48}Wide
{hline 77}
Number of observations     {res}         129   {txt}->   {res}42          
{txt}Number of variables        {res}          13   {txt}->   {res}18          
{txt}j variable (4 values)                 {res}i   {txt}->   (dropped)
xij variables:
                              {res}lang_perc   {txt}->   {res}lang_perc1 lang_perc2 ... lang_perc4
                           mothertongue   {txt}->   {res}mothertongue1 mothertongue2 ... mothertongue4
{txt}{hline 77}

{com}.         
.         order state_2011 castegroup_1961_2011_code national_tribe_perc state_tribe_perc matricplus_rate_2011 literacy_rate_2011 medinstr11 medium_perc1 medinstr12 medium_perc2
{txt}
{com}. 
.         gsort castegroup_1961_2011_code -state_tribe_perc
{txt}
{com}.         drop mothertongue4 lang_perc4
{txt}
{com}.         
.         save "../08_temp/census2011_state_table.dta" , replace
{txt}{p 0 4 2}
file {bf}
../08_temp/census2011_state_table.dta{rm}
saved
{p_end}

{com}. 
.         
. ************************************************************************************************************************
. * 3. Obtaining Information from 2011 Edu Religion Tables 
. ************************************************************************************************************************
. 
.         use "../08_temp/census2011_religion_edu_data", replace  
{txt}
{com}. 
.         
.         keep state_code state religion total_p matricplus_p_2011_p age0to14_p
{txt}
{com}.         replace religion = "All" if religion == "All religious communities"
{txt}(36 real changes made)

{com}.         replace religion = "Other" if religion == "Other religions and persuasions"
{txt}(36 real changes made)

{com}.         
.         reshape wide *_p, i(state_code state) j(religion) string
{txt}(j = All Buddhist Christian Hindu Jain Muslim Other Sikh)

Data{col 36}Long{col 43}->{col 48}Wide
{hline 77}
Number of observations     {res}         288   {txt}->   {res}36          
{txt}Number of variables        {res}           6   {txt}->   {res}26          
{txt}j variable (8 values)          {res}religion   {txt}->   (dropped)
xij variables:
                                {res}total_p   {txt}->   {res}total_pAll total_pBuddhist ... total_pSikh
                             age0to14_p   {txt}->   {res}age0to14_pAll age0to14_pBuddhist ... age0to14_pSikh
                    matricplus_p_2011_p   {txt}->   {res}matricplus_p_2011_pAll matricplus_p_2011_pBuddhist ... matricplus_p_2011_pSikh
{txt}{hline 77}

{com}. 
.         local religions Buddhist Christian Hindu Jain Muslim Other Sikh
{txt}
{com}. 
.         foreach relg of local religions {c -(}
{txt}  2{com}.                 gen popn_share_`relg' = total_p`relg'/total_pAll * 100 
{txt}  3{com}.         {c )-}
{txt}
{com}.         
. 
.         foreach relg of local religions {c -(}
{txt}  2{com}.                 gen matricplus_rate_2011_`relg' = matricplus_p_2011_p`relg'/(total_p`relg' - age0to14_p`relg') * 100
{txt}  3{com}. 
.         {c )-}
{txt}
{com}. 
.         
.         foreach relg of local religions {c -(}
{txt}  2{com}.                 order matricplus_rate_2011_`relg', after(popn_share_`relg')
{txt}  3{com}.         {c )-}
{txt}
{com}.         
.         rename state state_2011
{res}{txt}
{com}.         keep state_2011 popn_share_* matricplus_rate_*
{txt}
{com}.         
.         tempfile edu_religion
{txt}
{com}.         save `edu_religion'
{txt}{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_00324.00000e{rm}
saved
as .dta format
{p_end}

{com}.         
. ************************************************************************************************************************
. * 4. Retaining relevant information from the lang workfile
. ************************************************************************************************************************
. 
.         
.         use "../03_processed/lang_workfile.dta", clear
{txt}
{com}.         drop if is_state | castegroup_1961_2011_code == 500 
{txt}(660 observations deleted)

{com}.         gen state = state_1961
{txt}
{com}.         replace state = "Jharkhand" if state_1961 == "Bihar" & inlist(regionname6113,"Santal Parganas","Palamau","Dhanbad, Hazaribagh","Ranchi","Singhbhum")
{txt}(123 real changes made)

{com}.         replace state = "Chhattisgarh" if state_1961 == "Madhya Pradesh" & inlist(regionname6113,"Surguja","Bilaspur, Durg","Raigarh","Raipur","Bastar")
{txt}(121 real changes made)

{com}.         replace state = "Meghalaya" if state_1961 == "Assam"  & inlist(regionname6113,"Garo Hills","United Khasi And Jaintia Hills")
{txt}(20 real changes made)

{com}.         replace state = "Mizoram" if state_1961 == "Assam" & inlist(regionname6113,"Mizo Hills")
{txt}(11 real changes made)

{com}.         replace state = "Tamil Nadu" if state_1961 == "Madras"
{txt}(90 real changes made)

{com}.         replace state = "Karnataka" if state_1961 == "Mysore"
{txt}(115 real changes made)

{com}.         replace state = "Odisha" if state_1961 == "Orissa"
{txt}(367 real changes made)

{com}.         replace state = "Dadra & Nagar Haveli" if state_1961 == "Dadra and Nagar Haveli"
{txt}(7 real changes made)

{com}.         replace state = "Lakshadweep" if state_1961 == "Laccadive, Minicoy and Amindivi Islands"
{txt}(1 real change made)

{com}. 
.         keep state castegroup_1961_2011_code total_p_2011 matricplus_p_2011 age0to14_p_2011
{txt}
{com}.         collapse (sum) total_p_2011 matricplus_p_2011 age0to14_p_2011, by(state castegroup_1961_2011_code)
{res}{txt}
{com}.         
.         merge m:1 state using "../08_temp/census2011_agg_state_edu_data" , assert(using match) keep(match) nogen
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             487{txt}  
{col 5}{hline 41}

{com}.         
.         /*
>         states which do not match 
> `"Arunachal Pradesh"' `"Chandigarh"' `"Daman & Diu"' `"Goa"' `"Haryana"' `"India"' `"Jammu & Kashmir"' `"NCT of Delhi"' `"Puducherry"' `"Punjab"' `"Sikkim"' `"Uttar Pradesh"' `"Uttarakhand"'
>         */
. 
. 
.         local castes All Gen ST SC 
{txt}
{com}.         foreach y of local castes {c -(}
{txt}  2{com}.                 egen matricplus_p_2011_`y' = rowtotal(matric_p`y' intermediate_p`y' nontechdiploma_p`y' techdiploma_p`y' graduate_p`y')
{txt}  3{com}.         {c )-}
{txt}
{com}.         
. 
.         gen matricplus_rate_2011_sc =  matricplus_p_2011_SC/ (total_pSC - age0to14_pSC) * 100 //matricplus rate for scs
{txt}(10 missing values generated)

{com}.         gen matricplus_rate_2011_nonscst = matricplus_p_2011_Gen/(total_pGen - age0to14_pGen) * 100 //matricplus rate for non-sc/st 
{txt}
{com}.         gen matricplus_rate_2011_st = matricplus_p_2011_ST/(total_pST - age0to14_pST) * 100 
{txt}
{com}. 
.         gen popn_share_sc = total_pSC/total_pAll * 100 // share of sc of overall popn in region 
{txt}(10 missing values generated)

{com}.         gen popn_share_st_totpopn = total_pST/total_pAll * 100 // share of all st of total popn in region
{txt}
{com}.         gen popn_share_nonscst = total_pGen/total_pAll * 100 
{txt}
{com}. 
.         
.         gen popn_share_tribe_totst = total_p_2011/total_pST * 100 // perc of tribe as a fraction of all sts in the region 
{txt}
{com}.         gen popn_share_tribe = total_p_2011/total_pAll * 100 
{txt}
{com}.         
.         rename state state_2011 
{res}{txt}
{com}. 
.         merge 1:1 castegroup_1961_2011_code state_2011 using "../08_temp/census2011_state_table.dta", assert(master match) keep(match) nogen
{res}{txt}(label {bf:{txt}CASTE_GROUPS_1961_2011} already defined)

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              42{txt}  
{col 5}{hline 41}

{com}.         
.         gen nontribe_matricplus_p = matricplus_p_2011_ST - matricplus_p_2011 //excluding matric+ numbers of those belonging to big10 tribe
{txt}
{com}.         gen nontribe_age0to14_p = age0to14_pST - age0to14_p_2011 //excluding age 0to14 popn numbers of those belonging to big10 tribe
{txt}
{com}.         gen nontribe_total_p = total_pST - total_p_2011
{txt}
{com}.         
.         gen popn_share_nontribe = nontribe_total_p/total_pAll * 100 
{txt}
{com}.         gen matricplus_rate_2011_nontribe = nontribe_matricplus_p/(nontribe_total_p - nontribe_age0to14_p) * 100
{txt}
{com}. 
.         keep state_2011 castegroup_1961_2011_code national_tribe_perc state_tribe_perc ///
>         matricplus_rate_2011 literacy_rate_2011 medinstr11 medium_perc1 medinstr12 medium_perc2 ///
>         mothertongue1 lang_perc1 mothertongue2 lang_perc2 mothertongue3 lang_perc3 ///
>         matricplus_rate_2011_* popn_share_* 
{txt}
{com}. 
.         
.         order castegroup_1961_2011_code state_2011 national_tribe_perc state_tribe_perc popn_share_tribe_totst popn_share_tribe
{txt}
{com}.         order popn_share_nontribe matricplus_rate_2011_nontribe popn_share_st_totpopn matricplus_rate_2011_st popn_share_sc matricplus_rate_2011_sc popn_share_nonscst matricplus_rate_2011_nonscst, after(literacy_rate_2011)
{txt}
{com}.         
.         merge m:1 state_2011 using `edu_religion' , assert(using match) keep(match) nogen 
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              42{txt}  
{col 5}{hline 41}

{com}.         gsort -national_tribe_perc -state_tribe_perc  
{txt}
{com}.         format popn_share_* matricplus_rate_2011_* %5.2f
{txt}
{com}. 
.         
.         export excel using "../04_results/03_excel_tables/state_table.xls", firstrow(variables) replace
{res}{txt}file {bf:../04_results/03_excel_tables/state_table.xls} saved

{com}. 
.         
.         
. project, creates("../08_temp/census2011_state_table.dta")
{txt}project version2_tribe_language > do-file creates: {res}"08_temp/census2011_state_table.dta" filesig(2292793940:33554){txt}

{com}. project, creates("../04_results/03_excel_tables/state_table.xls")
{txt}project version2_tribe_language > do-file creates: {res}"04_results/03_excel_tables/state_table.xls" filesig(1758206613:39424){txt}

{com}. 
.         
. 
{txt}end of do-file
      name:  {res}plog_909
       {txt}log:  {res}/Users/sreyamajumder/Dropbox/sreya_majumder/tribelanguage_2020 sreya/02_scripts/2.11_make_excel_state_tables.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}16 Nov 2021, 12:41:51
{txt}{.-}
{smcl}
{txt}{sf}{ul off}