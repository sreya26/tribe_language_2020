{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}plog_794
       {txt}log:  {res}/Users/sreyamajumder/Dropbox/sreya_majumder/tribelanguage_2020 sreya/02_scripts/1.09_make_regions.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 6 Sep 2021, 20:09:49
{txt}
{com}. ********************************************************************************************************************************************
. * this file creates lists of pairs of child and parent states & districts for adjacent years, from 1961 through 2013 
. *! version 2.0 created by Hemanshu Kumar on 28 October 2020 -- alters code to take advantage of recently published 2001-2011 census tables
. *! version 1.0 created by Hemanshu Kumar on 19 July 2020
. ********************************************************************************************************************************************
. 
. local parentfile_2011_DISE "../01_data/census_boundaries_data/District Boundary Changes 2011-DISE 2013.xlsx"
{txt}
{com}. local parentfile_1961_2011 "../01_data/census_boundaries_data/District Boundary Changes 1961-2011.xlsx"
{txt}
{com}. 
. project , original("`parentfile_2011_DISE'")
{txt}project version2_tribe_language > do-file uses original: {res}"01_data/census_boundaries_data/District Boundary Changes 2011-DISE 2013.xlsx" filesig(211966675:86444){txt}

{com}. project , original("`parentfile_1961_2011'")
{txt}project version2_tribe_language > do-file uses original: {res}"01_data/census_boundaries_data/District Boundary Changes 1961-2011.xlsx" filesig(262706738:905247){txt}

{com}. project , original("1.09aa_programs_for_regions.do")
{txt}project version2_tribe_language > do-file uses original: {res}"02_scripts/1.09aa_programs_for_regions.do" filesig(4248955758:3115){txt}

{com}. 
. local parentfile_2011_DISE "../01_data/census_boundaries_data/District Boundary Changes 2011-DISE 2013.xlsx"
{txt}
{com}. local parentfile_1961_2011 "../01_data/census_boundaries_data/District Boundary Changes 1961-2011.xlsx"
{txt}
{com}. 
. ****************************************************************************************************
. * I. create lists of pairs of child and parent states & districts for adjacent years, from 1961 through 2013
. ****************************************************************************************************
. 
.         ****************************************************************************************************
.         * I.1 For census 1961-2011 
.         * this adapts code from "1.make_adminchanges_datasets.do" (written for 1961-2001) 
.         * in the relevant analysis folder of the EPW 2017 boundaries paper
.         ****************************************************************************************************
. 
.         
.         ****************************************************************************************************
.         * IMPORTANT!!!!!!
.         * We may ignore the 1961-71 inter-state transfers between UP and Bihar; or not.
.         *       these transfers involve Ballia district in UP [net recipient of 8,153 people]
.         *       and Shahabad [net loser of 10,536 people] and Saran [net recipient of 2,383 people] districts of Bihar
.         local ignoreupbr 1
{txt}
{com}.         * for the tribelanguage paper, we keep ignoreupbr = 1
.         ****************************************************************************************************
. 
.         ****************************************************************************************************
.         * IMPORTANT!!!!!!
.         * We may generate the files by ignoring small population transfers
.         local ignoresmall 1
{txt}
{com}.         local laxity 0.05 // the threshold for ignoring; based on the proportion of population transfered
{txt}
{com}.         * for the tribelanguage paper, we set ignoresmall to 1, and laxity to 0.05 (5%)
.         local verbose 0
{txt}
{com}.         * set to 1 if the transfers that are being ignored should be displayed, else to 0.
.         ****************************************************************************************************
. 
.         ****************************************************************************************************
.         * IMPORTANT!!!!!!!
.         * For Census 1961, we can either treat Manipur as a single district, or work with "sub-divisions". 
.         local manipur_61_district 0
{txt}
{com}.         * for the tribelanguage paper, we set this to 0
.         ****************************************************************************************************
. 
.         ****************************************************************************************************
.         * Also see notes on boundary changes at the end of this do-file
.         ****************************************************************************************************
. 
.         ****************************************************************************************************
.         * A note on Mappings and Transfers
.         * for each pair of census years, there is a "Mapping" observation for each district in the child year
.         * (i.e. the number of observations in the mapping`x'to`y' sheet should be the same 
.         * as the number of observations in the census`y' sheet
.         * however, the "mapping" does not actually identify the parent in the case of newly created districts
.         * those are covered in the "transfers`x'to`y' sheet
.         ****************************************************************************************************
. 
.         local censusyrs 1961 1971 1981 1991 2001 2011
{txt}
{com}.         local oldcensusyrs 1961 1971 1981 1991 2001
{txt}
{com}. 
.         local numcensus: list sizeof local(censusyrs)
{txt}
{com}.         local endyr: word `numcensus' of `censusyrs'
{txt}
{com}.         local firstyr: word 1 of `censusyrs'
{txt}
{com}. 
.         * first to inspect the census data to check if it's fine
. 
.         capture program drop makenumeric
{txt}
{com}.         program define makenumeric
{txt}  1{com}.                 syntax varlist
{txt}  2{com}.                 foreach var of varlist `varlist' {c -(}
{txt}  3{com}.                                 capture replace `var' = "" if `var' == "NA"
{txt}  4{com}.                                 capture destring `var', replace ignore(",")
{txt}  5{com}.                 {c )-}
{txt}  6{com}.         end
{txt}
{com}. 
.         capture program drop renamevars
{txt}
{com}.         program define renamevars
{txt}  1{com}.                 syntax varlist
{txt}  2{com}.                 foreach var of varlist `varlist' {c -(}
{txt}  3{com}.                         local endbit = substr("`var'",-4,.)
{txt}  4{com}.                         local stub = substr("`var'",1,length("`var'")-4)
{txt}  5{com}.                         rename `var' `stub'_`endbit'
{txt}  6{com}.                 {c )-}
{txt}  7{com}.         end
{txt}
{com}.         
.         foreach x of local censusyrs {c -(}
{txt}  2{com}. 
.                 if `x'==1961 & `manipur_61_district' == 1 {c -(}
{txt}  3{com}.                         tempfile manipur
{txt}  4{com}.                         import excel using "`parentfile_1961_2011'", sheet("Manipur1961to1971") cellrange(:E3) firstrow case(lower) clear
{txt}  5{com}.                         renamevars _all
{txt}  6{com}.                         save `manipur', replace
{txt}  7{com}.                         import excel using "`parentfile_1961_2011'", sheet("census`x'") firstrow case(lower) clear 
{txt}  8{com}.                         keep dcode`x' state`x' district`x' area`x' pop`x'
{txt}  9{com}.                         renamevars _all
{txt} 10{com}.                         drop if state_`x'=="Manipur"
{txt} 11{com}.                         append using `manipur'
{txt} 12{com}.                 {c )-}
{txt} 13{com}.                 else {c -(}
{txt} 14{com}.                         import excel using "`parentfile_1961_2011'", sheet("census`x'") firstrow case(lower) clear
{txt} 15{com}.                         keep dcode`x' state`x' district`x' area`x' pop`x'
{txt} 16{com}.                         renamevars _all
{txt} 17{com}.                 {c )-}
{txt} 18{com}.                 
.                 makenumeric dcode_`x'
{txt} 19{com}.                 drop if dcode_`x' == .
{txt} 20{com}.                 makenumeric area_`x' pop_`x'
{txt} 21{com}. 
.                 sum area_`x' pop_`x'
{txt} 22{com}.                 gen spot = 0
{txt} 23{com}.                 * to get rid of occasional state identifiers in district names for situations where two districts have the same name
.                 * also get rid of asterisks
.                 forvalues i = 1/8 {c -(}
{txt} 24{com}.                         local abbrev: word `i' of  " BH" " CG" " HP" " KT" " MH" " MP" " UP" "*"
{txt} 25{com}.                         replace spot = strpos(district_`x', "`abbrev'") if spot==0
{txt} 26{com}.                         {c )-}
{txt} 27{com}.                 replace spot = spot - 1 if spot>0
{txt} 28{com}.                 replace district_`x'  = substr(district_`x',1,spot) if spot>0
{txt} 29{com}.                 replace district_`x' = proper(trim(itrim(district_`x')))
{txt} 30{com}.                 replace state_`x' = proper(trim(itrim(state_`x')))
{txt} 31{com}.                 drop spot
{txt} 32{com}. 
.                 sort dcode_`x'
{txt} 33{com}.                 keep dcode_`x' state_`x' district_`x' area_`x' pop_`x'
{txt} 34{com}.                 
.                 assert ~missing(dcode_`x') & ~missing(pop_`x') & ~missing(state_`x') & ~missing(district_`x') // no missingness
{txt} 35{com}.                 distinct dcode_`x'
{txt} 36{com}.                 assert r(ndistinct) == r(N) // all dcodes are unique
{txt} 37{com}.                 
.                 if `x' == 2011 count if mod(dcode_`x',1000) == 0
{txt} 38{com}.                         else count if mod(dcode_`x',100) == 0
{txt} 39{com}.                 
.                 local statecount_`x' = r(N)
{txt} 40{com}.                 local distcount_`x' = _N - `statecount_`x''
{txt} 41{com}.                 
.                 noi dis as text "In census `x', there are a total of `statecount_`x'' states/UTs and `distcount_`x'' districts."
{txt} 42{com}.                 tempfile census_`x'
{txt} 43{com}.                 save `census_`x'', replace
{txt} 44{com}.         {c )-}
{res}{text}(5 vars, 376 obs)
{res}{txt}(0 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_1961 {c |}{res}        376    14995.89    42622.91          0   437819.3
{txt}{space 4}pop_1961 {c |}{res}        376     2336355     6368623       7032   7.37e+07
{txt}(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(2 real changes made)
(1 real change made)
(0 real changes made)
(5 real changes made)
(5 real changes made)
(8 real changes made)
(8 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1961{col 13}{c |}{result}       376{col 25}       376
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  27
{txt}In census 1961, there are a total of 27 states/UTs and 349 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000006{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000006{rm}
saved
as .dta format
{p_end}
{res}{text}(7 vars, 400 obs)
{res}{txt}(10 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_1971 {c |}{res}        390    16644.23    43709.71          9     442841
{txt}{space 4}pop_1971 {c |}{res}        390     2811075     7646254       8291   8.83e+07
{txt}(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(2 real changes made)
(1 real change made)
(0 real changes made)
(5 real changes made)
(5 real changes made)
(0 real changes made)
(0 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1971{col 13}{c |}{result}       390{col 25}       390
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  30
{txt}In census 1971, there are a total of 30 states/UTs and 360 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000007{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000007{rm}
saved
as .dta format
{p_end}
{res}{text}(7 vars, 452 obs)
{res}{txt}(9 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_1981 {c |}{res}        443    14653.28    41125.03          9     443446
{txt}{space 4}pop_1981 {c |}{res}        443     3069427     8953309      11631   1.11e+08
{txt}(1 real change made)
(0 real changes made)
(2 real changes made)
(0 real changes made)
(2 real changes made)
(2 real changes made)
(1 real change made)
(0 real changes made)
(8 real changes made)
(8 real changes made)
(1 real change made)
(0 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1981{col 13}{c |}{result}       443{col 25}       443
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  31
{txt}In census 1981, there are a total of 31 states/UTs and 412 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000008{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000008{rm}
saved
as .dta format
{p_end}
{res}{text}(8 vars, 508 obs)
{res}{txt}(10 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_1991 {c |}{res}        498    12959.19    38898.77          9     443446
{txt}{space 4}pop_1991 {c |}{res}        498     3399281    1.05e+07      20297   1.39e+08
{txt}(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(6 real changes made)
(6 real changes made)
(453 real changes made)
(15 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1991{col 13}{c |}{result}       498{col 25}       498
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  32
{txt}In census 1991, there are a total of 32 states/UTs and 466 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000009{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000009{rm}
saved
as .dta format
{p_end}
{res}{text}(8 vars, 632 obs)
{res}{txt}(4 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_2001 {c |}{res}        628    10276.48    31922.45          9     342239
{txt}{space 4}pop_2001 {c |}{res}        628     3275829    1.09e+07      31394   1.66e+08
{txt}(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(119 real changes made)
(119 real changes made)
(119 real changes made)
(173 real changes made)
(628 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2001{col 13}{c |}{result}       628{col 25}       628
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  35
{txt}In census 2001, there are a total of 35 states/UTs and 593 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000a{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000a{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 675 obs)
{res}{txt}(0 observations deleted)

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}area_2011 {c |}{res}        675    9561.613    30868.83          9     342239
{txt}{space 4}pop_2011 {c |}{res}        675     3587718    1.24e+07       8004   2.00e+08
{txt}(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(108 real changes made)
(661 real changes made)
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2011{col 13}{c |}{result}       675{col 25}       675
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}  35
{txt}In census 2011, there are a total of 35 states/UTs and 640 districts.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000b{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000b{rm}
saved
as .dta format
{p_end}

{com}. 
.         * now to check the Mappings
. 
. 
.         foreach x of local oldcensusyrs {c -(}               
{txt}  2{com}.                 local y = `x' + 10
{txt}  3{com}.                                 
.                 if `x'==1961 & `manipur_61_district' == 1 {c -(}
{txt}  4{com}.                         import excel using "`parentfile_1961_2011'", sheet("Manipur1961to1971") cellrange(G1:M7) firstrow case(lower) clear
{txt}  5{com}.                         rename loc`y' dcode`y'
{txt}  6{com}.                         rename implicitpop implicitpop`x'
{txt}  7{com}.                         rename district`y' district`y'namechanged
{txt}  8{com}.                         drop district1971in1961
{txt}  9{com}.                         tempfile manipur
{txt} 10{com}.                         save `manipur', replace
{txt} 11{com}. 
.                         import excel using "`parentfile_1961_2011'", sheet("Mapping`x'to`y'") firstrow case(lower) clear
{txt} 12{com}.                         keep dcode`y' state`y' district`y'namechanged area`y' dcode`x' implicitpop`x'
{txt} 13{com}.                         destring implicitpop`x', replace ignore("NA")
{txt} 14{com}.                         drop if state`y'=="Manipur"
{txt} 15{com}.                         append using `manipur'
{txt} 16{com}.                 {c )-}
{txt} 17{com}.                 
.                 else {c -(}
{txt} 18{com}.                         import excel using "`parentfile_1961_2011'", sheet("Mapping`x'to`y'") firstrow case(lower) clear
{txt} 19{com}.                 {c )-}
{txt} 20{com}.                 
.                 keep dcode`y' state`y' district`y'namechanged area`y' dcode`x' implicitpop`x'
{txt} 21{com}.                 order dcode`y' state`y' district`y'namechanged area`y' dcode`x' implicitpop`x'
{txt} 22{com}. 
.                 renamevars dcode`y' state`y' area`y' dcode`x' implicitpop`x'
{txt} 23{com}. 
.                 makenumeric dcode_`y'
{txt} 24{com}.                 label var implicitpop_`x' "Population in `x' adjusted to jurisdiction of `y'"
{txt} 25{com}.                 sort dcode_`y'
{txt} 26{com}.                 drop if missing(dcode_`y')
{txt} 27{com}.                 makenumeric dcode_`x' area_`y' implicitpop_`x'
{txt} 28{com}.                 
.                 count
{txt} 29{com}.                 noi dis as text "Between census `x' and census `y', there are " r(N) " mappings defined."
{txt} 30{com}.                 tempfile mapping`x'`y'
{txt} 31{com}.                 save `mapping`x'`y'', replace
{txt} 32{com}.         {c )-}
{res}{text}(6 vars, 399 obs)
{res}{txt}(9 observations deleted)
  {res}390
{txt}Between census 1961 and census 1971, there are 390 mappings defined.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000c{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000c{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 443 obs)
{res}{txt}(0 observations deleted)
  {res}443
{txt}Between census 1971 and census 1981, there are 443 mappings defined.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000d{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000d{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 498 obs)
{res}{txt}(0 observations deleted)
  {res}498
{txt}Between census 1981 and census 1991, there are 498 mappings defined.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000e{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000e{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 628 obs)
{res}{txt}(0 observations deleted)
  {res}628
{txt}Between census 1991 and census 2001, there are 628 mappings defined.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000f{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000f{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 675 obs)
{res}{txt}(0 observations deleted)
  {res}675
{txt}Between census 2001 and census 2011, there are 675 mappings defined.
{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000g{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000g{rm}
saved
as .dta format
{p_end}

{com}. 
.         * now to check the Transfers
. 
. 
.         foreach x of local oldcensusyrs {c -(}
{txt}  2{com}.                 local y = `x' + 10
{txt}  3{com}.                            
.                  if `x'== 1961 & `manipur_61_district' == 1 {c -(}
{txt}  4{com}.                         import excel using "`parentfile_1961_2011'", sheet("Manipur1961to1971") cellrange(O1:T6) firstrow case(lower) clear
{txt}  5{com}.                         tempfile manipur
{txt}  6{com}.                         save `manipur', replace
{txt}  7{com}.                         import excel using "`parentfile_1961_2011'", sheet("Transfers1961to1971") firstrow case(lower) clear
{txt}  8{com}.                         destring transferfromloc`x', replace
{txt}  9{com}.                         drop if transferfromloc`x'>=601501 & transferfromloc`x'<=601510
{txt} 10{com}.                         destring populationtransferred, replace ignore("NA")
{txt} 11{com}.                         append using `manipur'
{txt} 12{com}.                 {c )-}
{txt} 13{com}.            
.                 else {c -(}
{txt} 14{com}.                         import excel using "`parentfile_1961_2011'", sheet("Transfers`x'to`y'") firstrow case(lower) clear
{txt} 15{com}.                 {c )-}
{txt} 16{com}.                 
.                 keep transfertodist`y' transfertoloc`y' transferfromdist`x' transferfromloc`x' areatransferred populationtransferred
{txt} 17{com}.                 renamevars transfertodist`y' transfertoloc`y' transferfromdist`x' transferfromloc`x'
{txt} 18{com}.                 
.                 if `x' == 1961 & `ignoreupbr' == 1 {c -(}
{txt} 19{com}.                         drop if inlist(transferfromdist_1961,"Uttar Pradesh","Bihar","Shahabad","Ballia")
{txt} 20{com}.                         note: This dataset ignores the transfers between UP and Bihar in the 1960s.
{txt} 21{com}.                 {c )-}
{txt} 22{com}.                                 
.                 makenumeric transfertoloc_`y' 
{txt} 23{com}.                 drop if missing(transfertoloc_`y')
{txt} 24{com}.                 makenumeric transferfromloc_`x' areatransferred populationtransferred
{txt} 25{com}.                 
.                 if `x' == 2001 {c -(} // taking care of multiple transfers between the same pairs of districts between 2001-2011
{txt} 26{com}.                         tempvar dup
{txt} 27{com}.                         duplicates tag transferfromloc_2001 transfertoloc_2011, gen(`dup')
{txt} 28{com}.                         assert inlist(transferfromloc_2001,200317,200807,200825) if `dup' == 1 // Patiala to S.A.S. Nagar, Bharatpur to Alwar, and Rajsamand to Bhilwara
{txt} 29{com}.                         drop `dup'
{txt} 30{com}.                         collapse (sum) areatransferred populationtransferred, by(transfertodist_`y' transfertoloc_`y' transferfromdist_`x' transferfromloc_`x')
{txt} 31{com}.                 {c )-}
{txt} 32{com}.                 
.                 distinct transfertoloc_`y' transferfromloc_`x', joint
{txt} 33{com}.                 assert r(N) == _N // no duplicates among transfers
{txt} 34{com}. 
.                 count
{txt} 35{com}.                 noi dis as text "Between census `x' and census `y', there are " r(N) " transfers defined."
{txt} 36{com}.                 
.                 rename transferfromloc_`x' dcode_`x'
{txt} 37{com}.                 rename transfertoloc_`y' dcode_`y'
{txt} 38{com}.                 
.                 gen ignore = 0
{txt} 39{com}.                 if `ignoresmall' == 1 {c -(}
{txt} 40{com}.                         merge m:1 dcode_`x' using `census_`x'', keepusing(pop_`x') assert(match using) keep(match) nogen
{txt} 41{com}.                         tempvar parent_transfer_frac
{txt} 42{com}.                         gen `parent_transfer_frac' = populationtransferred/pop_`x'
{txt} 43{com}.                         
.                         merge m:1 dcode_`y' using `mapping`x'`y'', keepusing(implicitpop_`x') keep(match) nogen
{txt} 44{com}.                         tempvar child_transfer_frac
{txt} 45{com}.                         gen `child_transfer_frac' = populationtransferred/implicitpop_`x'
{txt} 46{com}.                         
.                         count if `parent_transfer_frac' < `laxity'
{txt} 47{com}.                         if r(N) > 0 & `verbose' {c -(}
{txt} 48{com}.                                 noi dis as err "Between census `x' and census `y', there are " r(N) " parent transfers that " _n "are smaller than `laxity' of the parent district population, and are being ignored:"
{txt} 49{com}.                                 noi li transferfromdist_`x' transfertodist_`y' populationtransferred `parent_transfer_frac' if `parent_transfer_frac' < `laxity'
{txt} 50{com}.                         {c )-}
{txt} 51{com}.                         
.                         count if `child_transfer_frac' < `laxity'
{txt} 52{com}.                         if r(N) > 0 & `verbose' {c -(}
{txt} 53{com}.                                 noi dis as err "Between census `x' and census `y', there are " r(N) " child transfers that " _n "are smaller than `laxity' of the parent district population, and are being ignored:"
{txt} 54{com}.                                 noi li transferfromdist_`x' transfertodist_`y' populationtransferred `parent_transfer_frac' if `parent_transfer_frac' < `laxity'
{txt} 55{com}.                         {c )-}
{txt} 56{com}.                         
.                         replace ignore = 1 if (`parent_transfer_frac' < `laxity'  & `child_transfer_frac' < `laxity' ) /*& mod(dcode`x',100)~=0 */ // apply the laxity criterion only at the district level
{txt} 57{com}.                         drop `parent_transfer_frac' pop_`x' `child_transfer_frac' 
{txt} 58{com}.                 {c )-}
{txt} 59{com}.                 
.                 rename transferfromdist_`x' district_`x'
{txt} 60{com}.                 rename transfertodist_`y' district_`y'
{txt} 61{com}.                 rename populationtransferred pop_`x'
{txt} 62{com}.                 rename areatransferred area_`x'
{txt} 63{com}. 
.                 sort dcode_`y'  
{txt} 64{com}.                 
.                 if `ignoresmall'        == 1    note: This dataset ignores small transfers that are less than `laxity' of the parent district population.
{txt} 65{com}.                 if `ignoreupbr'         == 1    note: This dataset ignores the transfers between UP and Bihar in the 1960s.
{txt} 66{com}.                 
.                 tempfile transfers`x'`y'
{txt} 67{com}.                 save `transfers`x'`y'', replace
{txt} 68{com}.         {c )-}
{res}{text}(6 vars, 90 obs)
{res}{txt}(5 observations deleted)
{res}{txt}(0 observations deleted)
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}        85{col 24}        85
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}  85
{txt}Between census 1961 and census 1971, there are 85 transfers defined.
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              85{txt}  
{col 5}{hline 41}
(2 missing values generated)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              85{txt}  
{col 5}{hline 41}
(2 missing values generated)
  {res}48
  46
{txt}(42 real changes made)
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000h{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000h{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 106 obs)
{res}{txt}(0 observations deleted)
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       106{col 24}       106
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}  106
{txt}Between census 1971 and census 1981, there are 106 transfers defined.
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             106{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             106{txt}  
{col 5}{hline 41}
(1 missing value generated)
  {res}28
  25
{txt}(25 real changes made)
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000i{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000i{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 115 obs)
{res}{txt}(0 observations deleted)
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       115{col 24}       115
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}  115
{txt}Between census 1981 and census 1991, there are 115 transfers defined.
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             115{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             115{txt}  
{col 5}{hline 41}
  {res}45
  41
{txt}(41 real changes made)
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000j{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000j{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 203 obs)
{res}{txt}(0 observations deleted)
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       203{col 24}       203
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}  203
{txt}Between census 1991 and census 2001, there are 203 transfers defined.
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             203{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             203{txt}  
{col 5}{hline 41}
  {res}49
  42
{txt}(42 real changes made)
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000k{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000k{rm}
saved
as .dta format
{p_end}
{res}{text}(6 vars, 149 obs)
{res}{txt}(0 observations deleted)

{p 0 4}{txt}Duplicates in terms of {res} transferfromloc_2001 transfertoloc_2011{p_end}

{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       146{col 24}       146
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}  146
{txt}Between census 2001 and census 2011, there are 146 transfers defined.
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             146{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             146{txt}  
{col 5}{hline 41}
  {res}54
  49
{txt}(47 real changes made)
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000l{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000l{rm}
saved
as .dta format
{p_end}

{com}. 
.         * check for duplicates between Mapping and Transfers files for the same decade
.         foreach x of local oldcensusyrs {c -(}
{txt}  2{com}.                 local y = `x' + 10              
{txt}  3{com}.                 use `mapping`x'`y'', clear
{txt}  4{com}.                 append using `transfers`x'`y''
{txt}  5{com}.                 distinct dcode_`x' dcode_`y', joint
{txt}  6{com}.                 assert r(N) == r(ndistinct)
{txt}  7{com}.         {c )-}
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       451{col 24}       451
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       482{col 24}       482
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       553{col 24}       553
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       696{col 24}       696
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 11}{c TT}{hline 11}{hline 11}
{col 1}{text}          {col 12}{c |}     total{col 24}  distinct
{res}{col 1}{text}{hline 11}{c +}{hline 11}{hline 11}
{res}{col 1}{text} (jointly){col 12}{c |}{result}       743{col 24}       743
{col 1}{text}{hline 11}{c BT}{hline 11}{hline 11}
{res}{txt}
{com}.                 
.         foreach x of local oldcensusyrs {c -(}
{txt}  2{com}.                 local y = `x' + 10              
{txt}  3{com}.                 use `census_`y'', clear
{txt}  4{com}.                 merge 1:m dcode_`y' using `transfers`x'`y'', keepusing(dcode_`x' pop_`x' area_`x' ignore) keep(match) nogen
{txt}  5{com}.                 gen byte weight = -1
{txt}  6{com}.                 drop if ignore == 1
{txt}  7{com}.                 drop ignore
{txt}  8{com}. 
.                 tempfile censustransfers
{txt}  9{com}.                 save `censustransfers'
{txt} 10{com}.                 
.                 use `census_`y'', clear
{txt} 11{com}.                 merge 1:m dcode_`y' using `mapping`x'`y'', keepusing(dcode_`x') assert(match) nogen
{txt} 12{com}.                 merge m:1 dcode_`x' using `census_`x'', keepusing(pop_`x' area_`x') keep(match) nogen 
{txt} 13{com}.                 * note that the above line will drop the newly created districts (since the mapping file does not record their parent)
.                 * the transfers involving those newly created districts are recorded in the transfers`x'`y' file
. 
.                 gen byte weight = 1
{txt} 14{com}.                 
.                 append using `censustransfers'
{txt} 15{com}.                 merge m:1 dcode_`y' using `mapping`x'`y'', keepusing(implicitpop_`x') keep(match) nogen
{txt} 16{com}.                 
.                 * note that pop`x' (and area`x') for the transfers, will contain just the transfered population (and area) for that `x' `y' pair
.                 * but for mappings, it will contain the population (resp., area) of the parent district: this we now fix
.                 
.                 * now we need to subtract off all transferred areas and populations from the maps to obtain the net self-transfers
. 
.                 gen double signedpop_`x' = weight*pop_`x'
{txt} 17{com}.                 gen double signedarea_`x' = weight*area_`x'
{txt} 18{com}. 
.                 egen double nettransferpop_`x' = total(signedpop_`x'), by(dcode_`x')
{txt} 19{com}.                 egen double nettransferarea_`x' = total(signedarea_`x'), by(dcode_`x')
{txt} 20{com}.                 
.                 replace pop_`x' = nettransferpop_`x' if weight == 1 // i.e. do this only for "maps"
{txt} 21{com}.                 replace area_`x' = nettransferarea_`x' if weight == 1
{txt} 22{com}. 
.                 rename pop_`x' poptransfer_`x'`y'
{txt} 23{com}.                 rename area_`x' areatransfer_`x'`y'
{txt} 24{com}.                 
.                 label var poptransfer_`x'`y' "Population Transferred from the `x' district to the `y' district"
{txt} 25{com}.                 label var areatransfer_`x'`y' "Area Transferred from the `x' district to the `y' district"
{txt} 26{com}.                 merge m:1 dcode_`x' using `census_`x'', keepusing(state_`x' district_`x' pop_`x' area_`x') keep(match) nogen
{txt} 27{com}. 
.                 if `y' == 2011 gen isstate_`y' = (mod(dcode_`y',1000)==0)
{txt} 28{com}.                         else gen isstate_`y' = (mod(dcode_`y',100)==0)
{txt} 29{com}.                 
.                 gen transferid_`x'`y' = string(dcode_`x') + string(dcode_`y')
{txt} 30{com}.                 destring transferid_`x'`y', replace
{txt} 31{com}.                 format transferid_`x'`y' %12.0f
{txt} 32{com}. 
.                 * we get rid of the zeros
.                 * note that this methodology implies the 100% population criterion,
.                 * i.e. boundary changes involving zero population transfers are ignored when defining unchanged or partitioned districts
. 
.                 drop if poptransfer_`x'`y' == 0 
{txt} 33{com}. 
.                 * it should be the case that total of transfers to every child district equals its implicitpop
.                 * we now do this consistency check
. 
.                 by dcode_`y', sort: egen double totalreceived = total(poptransfer_`x'`y')
{txt} 34{com}.                 gen double diff = totalreceived - implicitpop_`x'
{txt} 35{com}.                 count if diff~=0
{txt} 36{com}.                 
.                 * everything is fine, except for Haryana in '81-'91 (and UP-BR in '61-'71 if we choose to ignore it)
. 
.                 keep state_`y' dcode_`y' district_`y' isstate_`y' state_`x' dcode_`x' district_`x'      
{txt} 37{com}. 
.                 duplicates drop dcode_`x' dcode_`y', force
{txt} 38{com}.                 
.                 noi dis as text "We have " _N " overall transfers between `x' and `y'."
{txt} 39{com}.                                 
.                 distinct dcode_`x'
{txt} 40{com}.                 assert r(ndistinct) == `distcount_`x'' + `statecount_`x''
{txt} 41{com}. 
.                 distinct dcode_`y' if isstate_`y' == 0
{txt} 42{com}.                 assert r(ndistinct) == `distcount_`y''
{txt} 43{com}.                 distinct dcode_`y' if isstate_`y' == 1
{txt} 44{com}.                 assert r(ndistinct) == `statecount_`y''
{txt} 45{com}.                 
.                 tempfile parentage_`x'`y'
{txt} 46{com}.                 save `parentage_`x'`y'', replace
{txt} 47{com}. 
.         {c )-}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              85{txt}  
{col 5}{hline 41}
(42 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000m{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             390{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             366{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             409{txt}  
{col 5}{hline 41}
(2 missing values generated)
(21 real changes made)
(20 real changes made)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             409{txt}  
{col 5}{hline 41}
transferid_19611971: all characters numeric; {res}replaced {txt}as {res}double
{txt}(0 observations deleted)
(2 missing values generated)
  {res}70

{p 0 4}{txt}Duplicates in terms of {res} dcode_1961 dcode_1971{p_end}

{txt}(0 observations are duplicates)
We have 409 overall transfers between 1961 and 1971.
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1961{col 13}{c |}{result}       409{col 25}       376
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1971{col 13}{c |}{result}       378{col 25}       360
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1971{col 13}{c |}{result}        31{col 25}        30
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000n{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000n{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             106{txt}  
{col 5}{hline 41}
(25 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000o{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             443{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             376{txt}  
{col 5}{hline 41}
{p 0 7 2}
(variable
{bf:area_1971} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:pop_1971} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             457{txt}  
{col 5}{hline 41}
(8 missing values generated)
(45 real changes made)
(44 real changes made)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             457{txt}  
{col 5}{hline 41}
transferid_19711981: all characters numeric; {res}replaced {txt}as {res}double
{txt}(0 observations deleted)
(1 missing value generated)
  {res}39

{p 0 4}{txt}Duplicates in terms of {res} dcode_1971 dcode_1981{p_end}

{txt}(0 observations are duplicates)
We have 457 overall transfers between 1971 and 1981.
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1971{col 13}{c |}{result}       457{col 25}       390
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1981{col 13}{c |}{result}       426{col 25}       412
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1981{col 13}{c |}{result}        31{col 25}        31
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000p{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000p{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             115{txt}  
{col 5}{hline 41}
(41 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000q{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             498{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             438{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             512{txt}  
{col 5}{hline 41}
(4 missing values generated)
(51 real changes made)
(48 real changes made)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             512{txt}  
{col 5}{hline 41}
transferid_19811991: all characters numeric; {res}replaced {txt}as {res}double
{txt}(0 observations deleted)
  {res}73

{p 0 4}{txt}Duplicates in terms of {res} dcode_1981 dcode_1991{p_end}

{txt}(0 observations are duplicates)
We have 512 overall transfers between 1981 and 1991.
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1981{col 13}{c |}{result}       512{col 25}       443
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1991{col 13}{c |}{result}       480{col 25}       466
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1991{col 13}{c |}{result}        32{col 25}        32
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000r{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000r{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             203{txt}  
{col 5}{hline 41}
(42 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000s{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             628{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             493{txt}  
{col 5}{hline 41}
{p 0 7 2}
(variable
{bf:area_1991} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             654{txt}  
{col 5}{hline 41}
(117 real changes made)
(117 real changes made)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             654{txt}  
{col 5}{hline 41}
transferid_19912001: all characters numeric; {res}replaced {txt}as {res}double
{txt}(0 observations deleted)
  {res}49

{p 0 4}{txt}Duplicates in terms of {res} dcode_1991 dcode_2001{p_end}

{txt}(0 observations are duplicates)
We have 654 overall transfers between 1991 and 2001.
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_1991{col 13}{c |}{result}       654{col 25}       498
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2001{col 13}{c |}{result}       619{col 25}       593
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2001{col 13}{c |}{result}        35{col 25}        35
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000t{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000t{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             146{txt}  
{col 5}{hline 41}
(47 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000u{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             675{txt}  
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             597{txt}  
{col 5}{hline 41}
{p 0 7 2}
(variable
{bf:area_2001} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:pop_2001} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             696{txt}  
{col 5}{hline 41}
(57 real changes made)
(53 real changes made)
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             696{txt}  
{col 5}{hline 41}
transferid_20012011: all characters numeric; {res}replaced {txt}as {res}double
{txt}(0 observations deleted)
  {res}89

{p 0 4}{txt}Duplicates in terms of {res} dcode_2001 dcode_2011{p_end}

{txt}(0 observations are duplicates)
We have 696 overall transfers between 2001 and 2011.
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2001{col 13}{c |}{result}       696{col 25}       628
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2011{col 13}{c |}{result}       661{col 25}       640
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}
{col 1}{text}{hline 12}{c TT}{hline 11}{hline 11}
{col 1}{text}           {col 13}{c |}     total{col 25}  distinct
{res}{col 1}{text}{hline 12}{c +}{hline 11}{hline 11}
{res}{col 1}{text} dcode_2011{col 13}{c |}{result}        35{col 25}        35
{col 1}{text}{hline 12}{c BT}{hline 11}{hline 11}
{res}{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000v{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000v{rm}
saved
as .dta format
{p_end}

{com}.         
.         ****************************************************************************************************
.         * I.2 For census 2011 - DISE 2013-14 
.         ****************************************************************************************************
.         
.         import excel using "`parentfile_2011_DISE'", sheet("parentage") cellrange("A3") clear
{res}{text}(10 vars, 711 obs)

{com}.         
.         rename A stcode_dise
{res}{txt}
{com}.         rename B distcode_dise
{res}{txt}
{com}.         rename C district_dise
{res}{txt}
{com}.         rename D status
{res}{txt}
{com}.         rename E stcode_2011_1
{res}{txt}
{com}.         rename F distcode_2011_1
{res}{txt}
{com}.         rename G district_2011_1
{res}{txt}
{com}.         rename H stcode_2011_2
{res}{txt}
{com}.         rename I distcode_2011_2
{res}{txt}
{com}.         rename J district_2011_2
{res}{txt}
{com}.         
.         drop if missing(stcode_dise)
{txt}(14 observations deleted)

{com}.         
.         destring stcode_dise distcode_dise, replace
{txt}stcode_dise: all characters numeric; {res}replaced {txt}as {res}byte
{txt}distcode_dise: all characters numeric; {res}replaced {txt}as {res}byte
{txt}
{com}.                 
.         gen dcode_dise = stcode_dise*100 + distcode_dise
{txt}
{com}.         order dcode_dise , after(distcode_dise)
{txt}
{com}. 
.         gen isstate_dise = (distcode_dise == 0)
{txt}
{com}. 
.         gen state_dise = proper(district_dise) if isstate_dise
{txt}(662 missing values generated)

{com}.         replace state_dise = subinstr(state_dise, " And ", " and ",.)
{txt}(1 real change made)

{com}.         replace state_dise = "NCT of Delhi" if state_dise == "Nct Of Delhi"     
{txt}(1 real change made)

{com}.         replace state_dise = state_dise[_n-1] if missing(state_dise)
{txt}(662 real changes made)

{com}.         order state_dise, after(stcode_dise)
{txt}
{com}.         
.         count if isstate_dise == 0
  {res}662
{txt}
{com}.         local distcount_dise = r(N)
{txt}
{com}.         count if isstate_dise == 1
  {res}35
{txt}
{com}.         local statecount_dise = r(N)
{txt}
{com}.         
.         noi dis as text "In DISE 2013-14, there are a total of `statecount_dise' states/UTs and `distcount_dise' districts."
{res}{txt}In DISE 2013-14, there are a total of 35 states/UTs and 662 districts.

{com}.         
.         preserve
{txt}
{com}.                 keep stcode_dise state_dise distcode_dise dcode_dise district_dise
{txt}
{com}.                 order stcode_dise state_dise distcode_dise dcode_dise district_dise
{txt}
{com}.                 save "../08_temp/dise_states_districts", replace
{txt}{p 0 4 2}
file {bf}
../08_temp/dise_states_districts.dta{rm}
saved
{p_end}

{com}.         restore
{txt}
{com}.         
.         
.         reshape long stcode_2011_ distcode_2011_ district_2011_ , i(stcode_dise state_dise distcode_dise dcode_dise district_dise status) j(num)
{txt}(j = 1 2)

Data{col 36}Wide{col 43}->{col 48}Long
{hline 77}
Number of observations     {res}         697   {txt}->   {res}1,394       
{txt}Number of variables        {res}          13   {txt}->   {res}11          
{txt}j variable (2 values)                     ->   {res}num
{txt}xij variables:
            {res}stcode_2011_1 stcode_2011_2   {txt}->   {res}stcode_2011_
        distcode_2011_1 distcode_2011_2   {txt}->   {res}distcode_2011_
        district_2011_1 district_2011_2   {txt}->   {res}district_2011_
{txt}{hline 77}

{com}.         
.         rename *_ *
{res}{txt}
{com}.         drop num
{txt}
{com}.         drop if missing(stcode_2011)
{txt}(693 observations deleted)

{com}. 
.         gen double dcode_2011 = 201100000 + stcode_2011*1000 + distcode_2011
{txt}
{com}.         format dcode_2011 %9.0f
{txt}
{com}. 
.         duplicates drop dcode_2011 dcode_dise, force

{p 0 4}{txt}Duplicates in terms of {res} dcode_2011 dcode_dise{p_end}

{txt}(0 observations are duplicates)

{com}.         
.         noi dis as text "We have `=_N' overall transfers between census 2011 and DISE 2013-14."
{res}{txt}We have 701 overall transfers between census 2011 and DISE 2013-14.

{com}.         
.         tempfile parentage_2011dise
{txt}
{com}.         save `parentage_2011dise', replace
{txt}{p 0 4 2}
(file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000x{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.00000x{rm}
saved
as .dta format
{p_end}

{com}.         
. ****************************************************************************************************
. * II. Make regions with consistent boundaries between census 1961 and DISE 2013-14 
. ****************************************************************************************************
.         run 1.09aa_programs_for_regions.do
{txt}
{com}. 
.         use `parentage_2011dise', clear
{txt}
{com}.         
.         qui makeregions , parent(dcode_2011) child(dcode_dise) gen(region1113)
{txt}
{com}.         qui nameregions region1113, parent(district_2011) child(district_2011) gen(regionname1113)
{txt}
{com}.                         
.         tempvar dcode_dise_str dcode_2011_str
{txt}
{com}.         gen `dcode_dise_str' = string(dcode_dise)
{txt}
{com}.         gen `dcode_2011_str' = string(dcode_2011,"%9.0f")
{txt}
{com}.         qui listdistricts region1113 , diststrvar(`dcode_dise_str') gen(dists_dise_in_region1113)
{txt}
{com}.         qui listdistricts region1113 , diststrvar(`dcode_2011_str') gen(dists_2011_in_region1113)
{txt}
{com}.         
.         foreach yyyy in 2011 2001 1991 1981 1971 {c -(}
{txt}  2{com}.                 local yy = substr("`yyyy'",3,2)
{txt}  3{com}.                 local xxxx = `yyyy' - 10
{txt}  4{com}.                 local xx = substr("`xxxx'",3,2)
{txt}  5{com}. 
.                 duplicates drop dcode_`yyyy', force
{txt}  6{com}.                 keep dcode_`yyyy' region`yy'13 regionname`yy'13 dists_dise_in_region`yy'13 dists_2011_in_region`yy'13 
{txt}  7{com}.                 tempfile dcode_`yyyy'_with_regions`yy'13
{txt}  8{com}.                 save `dcode_`yyyy'_with_regions`yy'13'
{txt}  9{com}. 
.                 use `parentage_`xxxx'`yyyy''
{txt} 10{com}.                 merge m:1 dcode_`yyyy' using `dcode_`yyyy'_with_regions`yy'13', assert(match) nogen
{txt} 11{com}.         
.                 duplicates drop dcode_`xxxx' region`yy'13, force
{txt} 12{com}.         
.                 quietly {c -(}
{txt} 13{com}.                         makeregions , parent(dcode_`xxxx') child(region`yy'13) gen(region`xx'13)
{txt} 14{com}.                         nameregions region`xx'13, parent(district_`xxxx') child(regionname`yy'13) gen(regionname`xx'13)
{txt} 15{com}.                         listdistricts region`xx'13 , diststrvar(dists_dise_in_region`yy'13) gen(dists_dise_in_region`xx'13)
{txt} 16{com}.                         listdistricts region`xx'13 , diststrvar(dists_2011_in_region`yy'13) gen(dists_2011_in_region`xx'13)
{txt} 17{com}.                 {c )-}
{txt} 18{com}.                 if `xxxx' == 1961 {c -(}
{txt} 19{com}.                         tempvar dcode_1961_str
{txt} 20{com}.                         gen `dcode_1961_str' = string(dcode_1961,"%9.0f")
{txt} 21{com}.                         qui listdistricts region`xx'13 , diststrvar(`dcode_1961_str') gen(dists_1961_in_region`xx'13)
{txt} 22{com}.                 {c )-}
{txt} 23{com}.         {c )-}

{p 0 4}{txt}Duplicates in terms of {res} dcode_2011{p_end}

{txt}(26 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000010{rm}
saved
as .dta format
{p_end}
{res}{txt}{p 0 7 2}
(variable
{bf:dcode_2011} was {bf:long}, now {bf:double} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             696{txt}  
{col 5}{hline 41}

{p 0 4}{txt}Duplicates in terms of {res} dcode_2001 region1113{p_end}

{txt}(2 observations deleted)

{p 0 4}{txt}Duplicates in terms of {res} dcode_2001{p_end}

{txt}(66 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000011{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             654{txt}  
{col 5}{hline 41}

{p 0 4}{txt}Duplicates in terms of {res} dcode_1991 region0113{p_end}

{txt}(9 observations deleted)

{p 0 4}{txt}Duplicates in terms of {res} dcode_1991{p_end}

{txt}(147 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000012{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             512{txt}  
{col 5}{hline 41}

{p 0 4}{txt}Duplicates in terms of {res} dcode_1981 region9113{p_end}

{txt}(8 observations deleted)

{p 0 4}{txt}Duplicates in terms of {res} dcode_1981{p_end}

{txt}(61 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000013{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             457{txt}  
{col 5}{hline 41}

{p 0 4}{txt}Duplicates in terms of {res} dcode_1971 region8113{p_end}

{txt}(7 observations deleted)

{p 0 4}{txt}Duplicates in terms of {res} dcode_1971{p_end}

{txt}(60 observations deleted)
{p 0 4 2}
file {bf}
/var/folders/m0/4lyk4gcd0rs88ghc7sdnwc600000gn/T//S_13929.000014{rm}
saved
as .dta format
{p_end}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             409{txt}  
{col 5}{hline 41}

{p 0 4}{txt}Duplicates in terms of {res} dcode_1961 region7113{p_end}

{txt}(6 observations deleted)

{com}.         
.         preserve
{txt}
{com}.                 keep dcode_1961 state_1961 district_1961 region6113 regionname6113
{txt}
{com}.                 duplicates drop dcode_1961, force

{p 0 4}{txt}Duplicates in terms of {res} dcode_1961{p_end}

{txt}(27 observations deleted)

{com}.                 save "../08_temp/regions6113_with_dists_1961", replace
{txt}{p 0 4 2}
file {bf}
../08_temp/regions6113_with_dists_1961.dta{rm}
saved
{p_end}

{com}.         restore
{txt}
{com}.         
.         preserve
{txt}
{com}.                 duplicates drop region6113, force

{p 0 4}{txt}Duplicates in terms of {res} region6113{p_end}

{txt}(92 observations deleted)

{com}.                 keep region6113 regionname6113 dists_2011_in_region6113         
{txt}
{com}.                 split dists_2011_in_region6113 , gen(dcode_2011)
{res}variables created as string: 
{txt}{col 1}dcode_20111{col 15}dcode_20114{col 29}dcode_20117{col 43}dcode_201110{col 57}dcode_201113{col 71}dcode_201116{col 85}dcode_201119{col 99}dcode_201122{col 113}dcode_201125
{col 1}dcode_20112{col 15}dcode_20115{col 29}dcode_20118{col 43}dcode_201111{col 57}dcode_201114{col 71}dcode_201117{col 85}dcode_201120{col 99}dcode_201123
{col 1}dcode_20113{col 15}dcode_20116{col 29}dcode_20119{col 43}dcode_201112{col 57}dcode_201115{col 71}dcode_201118{col 85}dcode_201121{col 99}dcode_201124

{com}.                 reshape long dcode_2011 , i(region6113 regionname6113) j(num)
{txt}(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25)

Data{col 36}Wide{col 43}->{col 48}Long
{hline 77}
Number of observations     {res}         311   {txt}->   {res}7,775       
{txt}Number of variables        {res}          28   {txt}->   {res}5           
{txt}j variable (25 values)                    ->   {res}num
{txt}xij variables:
{res}dcode_20111 dcode_20112 ... dcode_201125  {txt}->   {res}dcode_2011
{txt}{hline 77}

{com}.                 keep if !missing(dcode_2011)
{txt}(7,100 observations deleted)

{com}.                 destring dcode_2011, replace
{txt}dcode_2011: all characters numeric; {res}replaced {txt}as {res}long
{txt}
{com}.                 drop num
{txt}
{com}.                 save "../03_processed/regions6113_with_dists_2011", replace
{txt}{p 0 4 2}
file {bf}
../03_processed/regions6113_with_dists_2011.dta{rm}
saved
{p_end}

{com}.         restore
{txt}
{com}. 
.         preserve
{txt}
{com}.                 duplicates drop region6113, force

{p 0 4}{txt}Duplicates in terms of {res} region6113{p_end}

{txt}(92 observations deleted)

{com}.                 keep region6113 regionname6113 dists_dise_in_region6113
{txt}
{com}.                 split dists_dise_in_region6113 , gen(dcode_dise)
{res}variables created as string: 
{txt}{col 1}dcode_dise1{col 15}dcode_dise4{col 29}dcode_dise7{col 43}dcode_dise10{col 57}dcode_dise13{col 71}dcode_dise16{col 85}dcode_dise19{col 99}dcode_dise22{col 113}dcode_dise25
{col 1}dcode_dise2{col 15}dcode_dise5{col 29}dcode_dise8{col 43}dcode_dise11{col 57}dcode_dise14{col 71}dcode_dise17{col 85}dcode_dise20{col 99}dcode_dise23
{col 1}dcode_dise3{col 15}dcode_dise6{col 29}dcode_dise9{col 43}dcode_dise12{col 57}dcode_dise15{col 71}dcode_dise18{col 85}dcode_dise21{col 99}dcode_dise24

{com}.                 reshape long dcode_dise , i(region6113 regionname6113) j(num)
{txt}(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25)

Data{col 36}Wide{col 43}->{col 48}Long
{hline 77}
Number of observations     {res}         311   {txt}->   {res}7,775       
{txt}Number of variables        {res}          28   {txt}->   {res}5           
{txt}j variable (25 values)                    ->   {res}num
{txt}xij variables:
{res}dcode_dise1 dcode_dise2 ... dcode_dise25  {txt}->   {res}dcode_dise
{txt}{hline 77}

{com}.                 keep if !missing(dcode_dise)
{txt}(7,078 observations deleted)

{com}.                 destring dcode_dise, replace
{txt}dcode_dise: all characters numeric; {res}replaced {txt}as {res}int
{txt}
{com}.                 drop num
{txt}
{com}.                 save "../08_temp/regions6113_with_dists_dise", replace
{txt}{p 0 4 2}
file {bf}
../08_temp/regions6113_with_dists_dise.dta{rm}
saved
{p_end}

{com}.         restore
{txt}
{com}.         
. project , creates("../08_temp/dise_states_districts.dta")       
{txt}project version2_tribe_language > do-file creates: {res}"08_temp/dise_states_districts.dta" filesig(145017176:44696){txt}

{com}. project , creates("../08_temp/regions6113_with_dists_1961.dta")
{txt}project version2_tribe_language > do-file creates: {res}"08_temp/regions6113_with_dists_1961.dta" filesig(21199044:77396){txt}

{com}. project , creates("../03_processed/regions6113_with_dists_2011.dta")
{txt}project version2_tribe_language > do-file creates: {res}"03_processed/regions6113_with_dists_2011.dta" filesig(2253008095:240447){txt}

{com}. project , creates("../08_temp/regions6113_with_dists_dise.dta")
{txt}project version2_tribe_language > do-file creates: {res}"08_temp/regions6113_with_dists_dise.dta" filesig(1096585368:142093){txt}

{com}. 
. /*
> ******************************************************************************************************
> Some comments on Assam boundary changes between 1971-91 from 
> Table A1 - Area, Houses, Population, pp. 17-19. Census of India 1991 Part II-A, General Population Tables
> ******************************************************************************************************
>   Nowgong District (as Nagaon District):  
>         In 1971 Census, it was spelled as Nowgong District, but later it was spelled as Nagaon District 
>         vide Govt Notification No. GAG(B) 370/87/102 dt 29.9.89
>   
>   Mikir Hill District (As Karbi Anglong District): 
>         Mikir Hill District as existed during 1971 Census, was renamed as Karbi Anglong District without any change
>         in the boundary of district vide Govt Notification No. HAD 140/78/108 dt 31.5.82
>   
>   Formation of Dibrugarh District: 
>         A new administrative district known as Dibrugarh district was constituted on 2nd October, 1971 
>         vide Govt of Assam notification No. AAP 110/70/165 dt 22.9.71 by bifurcating the existing 
>         Lakhimpur district. Dibrugarh district was formed with the entire area of existing 
>         Dibrugarh sub-division of existing Lakhimpur district.
> 
> ****************************************************************************************************
> From Census of India, 1971, India - General Population Tables, p. 41
> ****************************************************************************************************
> Sikkim became a state of the Indian union according to the constitution (36th) amendment act of 1975.
> 
> 
> ****************************************************************************************************
> Difference between our district counts and those from the Census 2011 Administrative Atlas:
> 
> Mizoram: 
>         In Census 1971 documents, Mizoram is not listed as a separate state. It figures as
>         the Mizo district of Assam. The Census 2011 atlas however lists it as a separate state.
> 
> Sikkim: 
>         The Atlas counts Sikkim as a single district in 1961 and 1971. This makes no sense.
>         Either Sikkim should be excluded from the India total (this is what we do) because it was not
>         formally part of India until 1975. Or if it is included, then it should have 4 districts
>         in both 1961 and 1971 (verified from Census 1981 tables for Sikkim) [note: Census 1971 volumes
>         for Sikkim are not available in the RTL at D'School]
> ****************************************************************************************************
> */
. 
{txt}end of do-file
      name:  {res}plog_794
       {txt}log:  {res}/Users/sreyamajumder/Dropbox/sreya_majumder/tribelanguage_2020 sreya/02_scripts/1.09_make_regions.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 6 Sep 2021, 20:10:01
{txt}{.-}
{smcl}
{txt}{sf}{ul off}